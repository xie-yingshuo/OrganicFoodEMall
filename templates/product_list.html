<div class="shop-area pb-80">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="shop-sidebar animate__animated animate__fadeInLeft">
                    <div class="shop-widget">
                        <h4 class="shop-sidebar-title">Sales Ranking</h4>
                        <div class="shop-list-style mt-3">
                            <ul>
                                <li>
                                    {% if top_category_list.0.id > 0 %}
                                    <a href="/shopping/product_list/{{top_category_list.0.id}}/">
                                        <span class="rank-badge">1</span> {{top_category_list.0.category_name}}
                                        <span>{{top_category_list.0.count}}</span>
                                    </a>
                                    {% else %}
                                    <a href="#">
                                        <span class="rank-badge">1</span> --
                                        <span>0</span>
                                    </a>
                                    {% endif %}
                                </li>
                                <li>
                                    {% if top_category_list.1.id > 0 %}
                                    <a href="/shopping/product_list/{{top_category_list.1.id}}/">
                                        <span class="rank-badge">2</span> {{top_category_list.1.category_name}}
                                        <span>{{top_category_list.1.count}}</span>
                                    </a>
                                    {% else %}
                                    <a href="#">
                                        <span class="rank-badge">2</span> --
                                        <span>0</span>
                                    </a>
                                    {% endif %}
                                </li>
                                <li>
                                    {% if top_category_list.2.id > 0 %}
                                    <a href="/shopping/product_list/{{top_category_list.2.id}}/">
                                        <span class="rank-badge">3</span> {{top_category_list.2.category_name}}
                                        <span>{{top_category_list.2.count}}</span>
                                    </a>
                                    {% else %}
                                    <a href="#">
                                        <span class="rank-badge">3</span> --
                                        <span>0</span>
                                    </a>
                                    {% endif %}
                                </li>
                                <li>
                                    {% if top_category_list.3.id > 0 %}
                                    <a href="/shopping/product_list/{{top_category_list.3.id}}/">
                                        <span class="rank-badge">4</span> {{top_category_list.3.category_name}}
                                        <span>{{top_category_list.3.count}}</span>
                                    </a>
                                    {% else %}
                                    <a href="#">
                                        <span class="rank-badge">4</span> --
                                        <span>0</span>
                                    </a>
                                    {% endif %}
                                </li>
                                <li>
                                    {% if top_category_list.4.id > 0 %}
                                    <a href="/shopping/product_list/{{top_category_list.4.id}}/">
                                        <span class="rank-badge">5</span> {{top_category_list.4.category_name}}
                                        <span>{{top_category_list.4.count}}</span>
                                    </a>
                                    {% else %}
                                    <a href="#">
                                        <span class="rank-badge">5</span> --
                                        <span>0</span>
                                    </a>
                                    {% endif %}
                                </li>
                                <li>
                                    {% if top_category_list.5.id > 0 %}
                                    <a href="/shopping/product_list/{{top_category_list.5.id}}/">
                                        <span class="rank-badge">6</span> {{top_category_list.5.category_name}}
                                        <span>{{top_category_list.5.count}}</span>
                                    </a>
                                    {% else %}
                                    <a href="#">
                                        <span class="rank-badge">6</span> --
                                        <span>0</span>
                                    </a>
                                    {% endif %}
                                </li>
                                <li>
                                    {% if top_category_list.6.id > 0 %}
                                    <a href="/shopping/product_list/{{top_category_list.6.id}}/">
                                        <span class="rank-badge">7</span> {{top_category_list.6.category_name}}
                                        <span>{{top_category_list.6.count}}</span>
                                    </a>
                                    {% else %}
                                    <a href="#">
                                        <span class="rank-badge">7</span> --
                                        <span>0</span>
                                    </a>
                                    {% endif %}
                                </li>
                                <li>
                                    {% if top_category_list.7.id > 0 %}
                                    <a href="/shopping/product_list/{{top_category_list.7.id}}/">
                                        <span class="rank-badge">8</span> {{top_category_list.7.category_name}}
                                        <span>{{top_category_list.7.count}}</span>
                                    </a>
                                    {% else %}
                                    <a href="#">
                                        <span class="rank-badge">8</span> --
                                        <span>0</span>
                                    </a>
                                    {% endif %}
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="shop-widget mt-4">
                        <h4 class="shop-sidebar-title">Latest Releases</h4>
                        <div class="shop-list-style mt-3">
                            <ul>
                                {% for product in new_product_list %}
                                <li><a
                                        href="/shopping/product_detail/{{product.id}}/">{{product.name}}<span>{{product.created_at|date:"m-d"}}</span></a>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="row">
                    {% for product in product_list %}
                    <div class="col-lg-4 col-md-6 col-sm-6 mb-4">
                        <div class="product-home animate__animated animate__fadeIn">
                            <div class="product-img">
                                <a href="/shopping/product_detail/{{product.id}}/">
                                    <img src="/{{product.image}}" alt="{{product.name}}"
                                        onerror="this.src='https://images.unsplash.com/photo-1542838132-92c53300491e?q=80&w=400&h=300&fit=crop'; this.style.objectFit='cover';">
                                </a>
                                <div class="product-action">
                                    <a title="Favourite" href="/shopping/add_to_favorites/{{product.id}}/">
                                        <i class="ti-heart"></i>
                                    </a>
                                    <a title="Add to Cart" href="/shopping/add_to_cart/{{product.id}}/">
                                        <i class="ti-shopping-cart"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="product-content">
                                <h4 class="product-title mb-0 mr-1 d-flex align-items-center">
                                    <a href="/shopping/product_detail/{{product.id}}/" class="text-truncate" style="max-width: 200px;" title="{{product.name}}">{{product.name}}</a>
                                    <span class="new badge badge-success ml-2" style="font-size: 1rem;">Â¥{{product.price}}</span>
                                </h4>
                               
                                
                                <div class="product-buttons d-flex justify-content-between">
                                    <a href="/shopping/add_to_favorites/{{product.id}}/" class="btn-action btn-favorite">
                                        <i class="ti-heart mr-1"></i>Favourite
                                    </a>
                                    <a href="/shopping/add_to_cart/{{product.id}}/" class="btn-action btn-cart">
                                        <i class="ti-shopping-cart mr-1"></i>Add to Cart
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="col-12 py-5 text-center">
                        <div class="empty-product">
                            <i class="ti-shopping-cart" style="font-size: 3rem; color: #e0e0e0;"></i>
                            <h4 class="mt-3">No Products</h4>
                            <p>There are currently no products in this category. Please check other categories.</p>
                            <a href="/" class="btn-shop mt-3">Back to Home</a>
                        </div>
                    </div>
                    {% endfor %}
                </div>

                {% if product_list.has_other_pages %}
                <div class="row mt-4">
                    <div class="col-12">
                        <nav aria-label="Page navigation">
                            <ul class="pagination justify-content-center">
                                {% if product_list.has_previous %}
                                <li class="page-item">
                                    <a class="page-link" href="?page={{ product_list.previous_page_number }}"
                                        aria-label="Previous">
                                        <span aria-hidden="true">&laquo;</span>
                                    </a>
                                </li>
                                {% else %}
                                <li class="page-item disabled">
                                    <span class="page-link">&laquo;</span>
                                </li>
                                {% endif %}

                                {% for i in product_list.paginator.page_range %}
                                {% if product_list.number == i %}
                                <li class="page-item active">
                                    <span class="page-link">{{ i }}</span>
                                </li>
                                {% else %}
                                <li class="page-item">
                                    <a class="page-link" href="?page={{ i }}">{{ i }}</a>
                                </li>
                                {% endif %}
                                {% endfor %}

                                {% if product_list.has_next %}
                                <li class="page-item">
                                    <a class="page-link" href="?page={{ product_list.next_page_number }}"
                                        aria-label="Next">
                                        <span aria-hidden="true">&raquo;</span>
                                    </a>
                                </li>
                                {% else %}
                                <li class="page-item disabled">
                                    <span class="page-link">&raquo;</span>
                                </li>
                                {% endif %}
                            </ul>
                        </nav>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<style>
    .rank-badge {
        display: inline-block;
        width: 24px;
        height: 24px;
        line-height: 24px;
        text-align: center;
        background-color: #f5f5f5;
        border-radius: 50%;
        margin-right: 8px;
        font-weight: 600;
        font-size: 12px;
    }

    .empty-product {
        background-color: white;
        padding: 50px 30px;
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
    }

    .animate__animated {
        animation-duration: 0.8s;
    }

    .product-content {
        padding: 15px;
        background-color: white;
        border-radius: 0 0 var(--border-radius) var(--border-radius);
    }

    .product-title {
        width: 60%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        font-size: 16px;
    }

    .product-title a {
        color: var(--text-color);
        text-decoration: none;
        transition: var(--transition);
    }

    .product-title a:hover {
        color: var(--primary-color);
    }

    .product-price .new {
        color: var(--primary-color);
        font-weight: 600;
        font-size: 18px;
    }

    .btn-action {
        padding: 5px 10px;
        font-size: 13px;
        border-radius: 4px;
        text-decoration: none;
        transition: var(--transition);
        display: inline-block;
    }

    .btn-favorite {
        color: #666;
        background-color: #f5f5f5;
    }

    .btn-favorite:hover {
        background-color: #ffe0e0;
        color: #ff4757;
        text-decoration: none;
    }

    .btn-cart {
        color: white;
        background-color: var(--primary-color);
    }

    .btn-cart:hover {
        background-color: var(--primary-dark);
        color: white;
        text-decoration: none;
    }

    @media (max-width: 767px) {
        .product-home {
            max-width: 320px;
            margin-left: auto;
            margin-right: auto;
        }
    }
</style>